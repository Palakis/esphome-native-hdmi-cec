esphome:
  name: "hdmi-cec-demo"

external_components:
  - source:
      type: local
      path: components

esp32:
  board: esp32dev
  framework:
    type: arduino

# Enable logging
logger:

# Enable Home Assistant API
api:
  encryption:
    key: !secret encryption_key

# Enable OTA
ota:
  password: !secret mgmt_pass

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  fast_connect: True

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:

captive_portal:

hdmi_cec:
  pin: GPIO26
  address: 0x5
  on_message:
    # Give OSD name
    - opcode: 0x46
      then:
        hdmi_cec.send:
          destination: 0x0
          data: [0x47, 0x65, 0x73, 0x70, 0x68, 0x6F, 0x6D, 0x65] # esphome

    # Volume Up
    - data: [0x44, 0x41]
      then:
        logger.log: "Volume Up"

    # Volume Down
    - data: [0x44, 0x42]
      then:
        logger.log: "Volume Down"

    # Mute
    - data: [0x44, 0x43]
      then:
        - logger.log: "Mute"
